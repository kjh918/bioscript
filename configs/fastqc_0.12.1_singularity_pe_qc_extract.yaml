# =========================================================
# FastQC: Comprehensive Quality Control for Sequence Data
#  - Generates HTML reports and data zip files
#  - Supports automated extraction for direct data parsing
#  - Singularity-based execution for environment consistency
# =========================================================
tool:
  name: fastqc
  version: "0.12.1"
  profile: "singularity_pe_qc_extract"

io:
  inputs:
    SeqID:       { required: true, help: "Sequence identifier used to locate FASTQ files" }
    RawFastqDir: { required: true, help: "Directory containing raw or trimmed FASTQ files" }
    qcResDir:    { required: true, help: "Directory where FastQC reports will be saved" }

  outputs:
    # FastQC 기본 산출물 (PE Read 1/2)
    r1_html: { default: "[qcResDir]/[SeqID]_R1_fastqc.html", help: "Quality report for Read 1 in HTML" }
    r2_html: { default: "[qcResDir]/[SeqID]_R2_fastqc.html", help: "Quality report for Read 2 in HTML" }
    r1_zip:  { default: "[qcResDir]/[SeqID]_R1_fastqc.zip",  help: "Data zip file for Read 1" }
    r2_zip:  { default: "[qcResDir]/[SeqID]_R2_fastqc.zip",  help: "Data zip file for Read 2" }

    # --extract 옵션 사용 시 생성되는 폴더
    r1_dir:  { default: "[qcResDir]/[SeqID]_R1_fastqc", help: "Extracted report directory for Read 1" }
    r2_dir:  { default: "[qcResDir]/[SeqID]_R2_fastqc", help: "Extracted report directory for Read 2" }

params:
  # --- [Binaries & Container] ---
  singularity_bin: { type: str, default: "singularity", help: "Path to singularity executable" }
  fastqc_bin:      { type: str, default: "fastqc",      help: "FastQC binary name inside container" }
  sif:             { type: str, default: "/storage/images/fastqc-0.12.1.sif", help: "Path to FastQC SIF image" }
  bind:            { type: str, default: "/storage,/data", help: "Mount paths for singularity exec" }

  # --- [Resources & Options] ---
  threads:         { type: int, default: 8, help: "Number of threads (FastQC processes files in parallel)" }
  fastqc_args:     { type: str, default: "--extract", help: "Additional FastQC flags (e.g., --extract, --nogroup)" }

cmd_line: >
  [singularity_bin] exec -B [bind] [sif] [fastqc_bin] [fastqc_args]
  --threads [threads] --outdir [qcResDir]
  [RawFastqDir]/[SeqID]_R1.fastq.gz [RawFastqDir]/[SeqID]_R2.fastq.gz